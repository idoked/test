const catalog=document.getElementById("catalog"),filter=document.getElementById("filter");let filteredProducts=[],areaToggle=!1,equipmentToggle=!1;const renderProduct=e=>{if(e.active){let t="";for(key in e.equipment)e.equipment[key]&&(t+='<img src="img/general/'+key+'.svg" alt="'+key+'">');catalog.innerHTML+='<article class="product"><img class="product__image" src="'+e.image+'" alt="'+e.title+'"><div class="product__content"><div class="info"><h4 class="product__title">'+e.title+'</h4><ul class="product__specs"><li class="product__spec-item">Размеры (ШхГхВ) - '+e.size+'</li><li class="product__spec-item">Площадь - '+e.area+' м2</li><li class="product__spec-item">Оснащение номера '+t+'</li><li class="product__spec-item">Цена за сутки: <strong> '+e.price+'₽</strong></li></ul></div><button class="product__button">Забронировать</button></div></article>'}};window.addEventListener("input",()=>filterCheck(),!1);const filterCheck=()=>{let e=document.getElementsByName("area"),t=document.getElementsByName("equipment"),r=0,l=0;for(key in e)e[key].checked&&l++;for(key in t)t[key].checked&&r++;equipmentToggle=0!=r,areaToggle=0!=l,areaToggle||equipmentToggle?filter.classList.add("active"):(catalogReset(),filter.classList.remove("active"))},filterReset=()=>{let e=filter.getElementsByTagName("input");for(key in e)e[key].checked=!1;filterCheck(),catalogReset()},catalogReset=()=>{filteredProducts=JSON.parse(JSON.stringify(products)),renderProducts(filteredProducts)},filterSubmit=e=>{e.preventDefault();let t=filter.querySelectorAll("input[name='equipment']"),r=filter.querySelectorAll("input[name='area']"),l=[],i=[];for(key in t)t[key].checked&&l.push(t[key].value);for(key in r)if(r[key].checked){let e=parseFloat(r[key].value,10);i.push(e)}filterSort(i,l)},filterSort=(e,t)=>{filteredProducts=JSON.parse(JSON.stringify(products)),areaToggle&&(filteredProducts=filterArea(e,filteredProducts)),equipmentToggle&&(filteredProducts=filterEquipment(t,filteredProducts)),renderProducts(filteredProducts)},filterArea=(e,t)=>{for(let r of t)if(r.active){let t=0;for(let l of e)l===r.area&&t++;r.active=0!==t}return t},filterEquipment=(e,t)=>{for(let t of filteredProducts)if(t.active){let r=0;for(let l of e)t.equipment[l]&&r++;t.active=0!==r}return t},renderProducts=e=>{catalog.innerHTML="";for(let t of e)renderProduct(t)};renderProducts(products);